{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gagan\\\\Plane-Rush\\\\src\\\\pages\\\\Store.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { GameContext } from '../utils/web3';\nimport { useContext, useEffect, useCallback } from 'react';\nimport NFT from '../components/NFT';\nimport Load from '../components/Load';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Store = () => {\n  _s();\n\n  const {\n    state,\n    setState\n  } = useContext(GameContext);\n  const loadNftById = useCallback(async i => {\n    const nft = parseInt(await state.contract.methods.tokenByIndex(i).call());\n    const price = state.web3.utils.fromWei(await state.contract.methods.charactersForSale(nft).call(), 'ether');\n    console.log('nft:' + nft);\n    const url = await state.contract.methods.tokenURI(nft).call();\n    setState(state => ({ ...state,\n      nfts: [...state.nfts, {\n        url,\n        price,\n        page: 'store',\n        tokenId: nft\n      }]\n    }));\n  }, [state, setState]);\n  const loadNfts = useCallback(() => {\n    state.contract.methods.totalSupply().call().then(supply => {\n      console.log(supply);\n\n      for (let i = 0; i < supply; i++) {\n        loadNftById(i);\n      }\n    }).catch(e => {\n      console.log('nft fetch error');\n    });\n  }, [state, loadNftById]);\n  useEffect(() => {\n    if (state.loaded && state.nfts.length === 0) {\n      loadNfts();\n    }\n  }, [state, loadNfts]);\n  const items = state.nfts.length > 0 ? state.nfts.map(nft => /*#__PURE__*/_jsxDEV(NFT, {\n    nft: nft\n  }, nft.tokenId, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 31\n  }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid position-absolute top-50 start-50 translate-middle\",\n    children: /*#__PURE__*/_jsxDEV(\"center\", {\n      children: /*#__PURE__*/_jsxDEV(Load, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 7\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"center\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '50px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-store-alt \",\n          children: \"Store\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center \",\n        style: {\n          flexWrap: 'wrap'\n        },\n        children: items\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Store, \"vZg0clLQ9w5trThcuM2mXf5mpTU=\");\n\n_c = Store;\nexport default Store;\n\nvar _c;\n\n$RefreshReg$(_c, \"Store\");","map":{"version":3,"sources":["C:/Users/gagan/Plane-Rush/src/pages/Store.jsx"],"names":["React","GameContext","useContext","useEffect","useCallback","NFT","Load","Store","state","setState","loadNftById","i","nft","parseInt","contract","methods","tokenByIndex","call","price","web3","utils","fromWei","charactersForSale","console","log","url","tokenURI","nfts","page","tokenId","loadNfts","totalSupply","then","supply","catch","e","loaded","length","items","map","fontSize","flexWrap"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { GameContext } from '../utils/web3';\r\nimport { useContext, useEffect, useCallback } from 'react';\r\nimport NFT from '../components/NFT';\r\nimport Load from '../components/Load';\r\n\r\nconst Store = () => {\r\n  const { state, setState } = useContext(GameContext);\r\n\r\n  const loadNftById = useCallback(\r\n    async (i) => {\r\n      const nft = parseInt(await state.contract.methods.tokenByIndex(i).call());\r\n      const price = state.web3.utils.fromWei(\r\n        await state.contract.methods.charactersForSale(nft).call(),\r\n        'ether'\r\n      );\r\n      console.log('nft:' + nft);\r\n      const url = await state.contract.methods.tokenURI(nft).call();\r\n      setState((state) => ({\r\n        ...state,\r\n        nfts: [...state.nfts, { url, price, page: 'store', tokenId: nft }],\r\n      }));\r\n    },\r\n    [state, setState]\r\n  );\r\n\r\n  const loadNfts = useCallback(() => {\r\n    state.contract.methods\r\n      .totalSupply()\r\n      .call()\r\n      .then((supply) => {\r\n        console.log(supply);\r\n        for (let i = 0; i < supply; i++) {\r\n          loadNftById(i);\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log('nft fetch error');\r\n      });\r\n  }, [state, loadNftById]);\r\n\r\n  useEffect(() => {\r\n    if (state.loaded && state.nfts.length === 0) {\r\n      loadNfts();\r\n    }\r\n  }, [state, loadNfts]);\r\n\r\n  const items =\r\n    state.nfts.length > 0 ? (\r\n      state.nfts.map((nft) => <NFT key={nft.tokenId} nft={nft} />)\r\n    ) : (\r\n      <div className='container-fluid position-absolute top-50 start-50 translate-middle'>\r\n        <center>\r\n          <Load />\r\n        </center>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div>\r\n      <center>\r\n        <div style={{ fontSize: '50px' }}>\r\n          <i className='fas fa-store-alt '>Store</i>\r\n        </div>\r\n        <div\r\n          className='d-flex justify-content-center '\r\n          style={{ flexWrap: 'wrap' }}>\r\n          {items}\r\n        </div>\r\n      </center>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Store;\r\n"]},"metadata":{},"sourceType":"module"}